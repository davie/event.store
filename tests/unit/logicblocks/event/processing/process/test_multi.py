import pytest

from logicblocks.event.processing import (
    ProcessStatus,
    determine_multi_process_status,
)


@pytest.mark.parametrize(
    "status_1, status_2, expected_status",
    [
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.INITIALISED,
            ProcessStatus.INITIALISED,
        ),
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.STARTING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.WAITING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.RUNNING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.STOPPING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.INITIALISED,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.INITIALISED,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.STARTING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.WAITING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.RUNNING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.STOPPING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STARTING,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.INITIALISED,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.STARTING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.WAITING,
            ProcessStatus.WAITING,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.RUNNING,
            ProcessStatus.RUNNING,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.STOPPING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.WAITING,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.INITIALISED,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.STARTING,
            ProcessStatus.STARTING,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.WAITING,
            ProcessStatus.RUNNING,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.RUNNING,
            ProcessStatus.RUNNING,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.STOPPING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.RUNNING,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.STOPPING,
            ProcessStatus.INITIALISED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPING,
            ProcessStatus.STARTING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPING,
            ProcessStatus.WAITING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPING,
            ProcessStatus.RUNNING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPING,
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPING,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.INITIALISED,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.STARTING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.WAITING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.RUNNING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPING,
            ProcessStatus.STOPPING,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPED,
            ProcessStatus.STOPPED,
        ),
        (
            ProcessStatus.STOPPED,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.INITIALISED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.STARTING,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.WAITING,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.RUNNING,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.STOPPING,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.STOPPED,
            ProcessStatus.ERRORED,
        ),
        (
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
            ProcessStatus.ERRORED,
        ),
    ],
)
def test_determine_multi_process_status(status_1, status_2, expected_status):
    assert (
        determine_multi_process_status(status_1, status_2) == expected_status
    )
